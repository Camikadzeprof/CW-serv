generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model Cart {
  id     Int    @id(map: "PK__Cart__3213E83F8C58D994") @default(autoincrement())
  food   Int?
  amount Int
  userid Int?
  Menu   Menu?  @relation(fields: [food], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_CART_MENU")
  Users  Users? @relation(fields: [userid], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_CART_USERS")
}

model Menu {
  id          Int           @id(map: "PK__Menu__3213E83F92B2DAB2") @default(autoincrement())
  name        String?       @db.NVarChar(100)
  type        Int?
  image       String?       @db.NVarChar(Max)
  description String?       @db.NVarChar(Max)
  price       Float         @db.Money
  Cart        Cart[]
  Type        Type?         @relation(fields: [type], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_MENU_TYPE")
  OrderedFood OrderedFood[]
}

model OrderedFood {
  id      Int     @id(map: "PK__OrderedF__3213E83F13A560DD") @default(autoincrement())
  food    Int?
  amount  Int
  orderid Int?
  Menu    Menu?   @relation(fields: [food], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_ORDEREDFOOD_MENU")
  Orders  Orders? @relation(fields: [orderid], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_ORDEREDFOOD_ORDER")
}

model Orders {
  id          Int           @id(map: "PK__Orders__3213E83FACE7FE5D") @default(autoincrement())
  amount      Float         @db.Money
  payment     Int
  paid        Boolean?      @default(false, map: "DF__Orders__paid__49C3F6B7")
  address     String        @db.NVarChar(100)
  status      Int
  date        DateTime      @db.DateTime
  userid      Int?
  OrderedFood OrderedFood[]
  Users       Users?        @relation(fields: [userid], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "FK_ORDERS_USERS")
}

model Type {
  id   Int     @id(map: "PK__Type__3213E83F86E6C315") @default(autoincrement())
  name String? @db.NVarChar(20)
  Menu Menu[]
}

model Users {
  id       Int      @id(map: "PK__Users__3213E83F5C21748D") @default(autoincrement())
  username String   @db.NVarChar(50)
  email    String   @db.NVarChar(100)
  phone    String   @db.NVarChar(15)
  password String   @db.NVarChar(50)
  role     String?  @db.NVarChar(10)
  Cart     Cart[]
  Orders   Orders[]
}
